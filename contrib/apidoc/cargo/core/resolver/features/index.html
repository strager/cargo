<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Feature resolver"><meta name="keywords" content="rust, rustlang, rust-lang, features"><title>cargo::core::resolver::features - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../../normalize.css"><link rel="stylesheet" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../../ayu.css" disabled><link rel="stylesheet" href="../../../../dark.css" disabled><link rel="stylesheet" href="../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../storage.js"></script><script defer src="../../../../main.js"></script><noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../../cargo/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../../cargo/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module features</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../../index.html">cargo</a>::<wbr><a href="../../index.html">core</a>::<wbr><a href="../index.html">resolver</a>::<wbr><a class="mod" href="#">features</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../../src/cargo/core/resolver/features.rs.html#1-924">source</a> Â· <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="feature-resolver"><a href="#feature-resolver">Feature resolver</a></h2>
<p>This is a <a href="https://doc.rust-lang.org/nightly/cargo/reference/resolver.html#feature-resolver-version-2">new feature resolver</a> that runs independently of the main
dependency resolver. It has several options which can enable new feature
resolution behavior.</p>
<p>One of its key characteristics is that it can avoid unifying features for
shared dependencies in some situations. See <a href="struct.FeatureOpts.html" title="FeatureOpts"><code>FeatureOpts</code></a> for the
different behaviors that can be enabled. If no extra options are enabled,
then it should behave exactly the same as the dependency resolverâ€™s
feature resolution.</p>
<p>The preferred way to engage this new resolver is via <a href="../../../ops/resolve/fn.resolve_ws_with_opts.html"><code>resolve_ws_with_opts</code></a>.</p>
<p>This does not <em>replace</em> feature resolution in the dependency resolver, but
instead acts as a second pass which can <em>narrow</em> the features selected in
the dependency resolver. The dependency resolver still needs to do its own
feature resolution in order to avoid selecting optional dependencies that
are never enabled. The dependency resolver could, in theory, just assume
all optional dependencies on all packages are enabled (and remove all
knowledge of features), but that could introduce new requirements that
might change old behavior or cause conflicts. Maybe some day in the future
we could experiment with that, but it seems unlikely to work or be all
that helpful.</p>
<h3 id="assumptions"><a href="#assumptions">Assumptions</a></h3>
<p>There are many assumptions made about the dependency resolver:</p>
<ul>
<li>Assumes feature validation has already been done during the construction
of feature maps, so the feature resolver doesnâ€™t do that validation at all.</li>
<li>Assumes <code>dev-dependencies</code> within a dependency have been removed
in the given <a href="../resolve/struct.Resolve.html" title="Resolve"><code>Resolve</code></a>.</li>
</ul>
<p>There are probably other assumptions that I am forgetting.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CliFeatures.html" title="cargo::core::resolver::features::CliFeatures struct">CliFeatures</a></div><div class="item-right docblock-short">Features specified on the command-line.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FeatureOpts.html" title="cargo::core::resolver::features::FeatureOpts struct">FeatureOpts</a></div><div class="item-right docblock-short">Options for how the feature resolver works.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.FeatureResolver.html" title="cargo::core::resolver::features::FeatureResolver struct">FeatureResolver</a></div><div class="item-right docblock-short">The new feature resolver that <a href="struct.FeatureResolver.html#method.resolve"><code>resolve</code></a>s your project.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ResolvedFeatures.html" title="cargo::core::resolver::features::ResolvedFeatures struct">ResolvedFeatures</a></div><div class="item-right docblock-short">Set of all activated features for all packages in the resolve graph.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.FeaturesFor.html" title="cargo::core::resolver::features::FeaturesFor enum">FeaturesFor</a></div><div class="item-right docblock-short">Flag to indicate if features are requested for a certain type of dependency.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ForceAllTargets.html" title="cargo::core::resolver::features::ForceAllTargets enum">ForceAllTargets</a></div><div class="item-right docblock-short">Flag to indicate that target-specific filtering should be disabled.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.HasDevUnits.html" title="cargo::core::resolver::features::HasDevUnits enum">HasDevUnits</a></div><div class="item-right docblock-short">Flag to indicate if Cargo is building <em>any</em> dev units (tests, examples, etc.).</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.RequestedFeatures.html" title="cargo::core::resolver::features::RequestedFeatures enum">RequestedFeatures</a></div><div class="item-right docblock-short">Features flags requested for a package.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ActivateMap.html" title="cargo::core::resolver::features::ActivateMap type">ActivateMap</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">Map of activated features.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.DiffMap.html" title="cargo::core::resolver::features::DiffMap type">DiffMap</a></div><div class="item-right docblock-short">Map of differences.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.PackageFeaturesKey.html" title="cargo::core::resolver::features::PackageFeaturesKey type">PackageFeaturesKey</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">The key used in various places to store features for a particular dependency.
The actual discrimination happens with the <a href="enum.FeaturesFor.html" title="FeaturesFor"><code>FeaturesFor</code></a> type.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../../" data-current-crate="cargo" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0 (69f9c33d7 2022-12-12)" ></div></body></html>